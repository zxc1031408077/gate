Gate.io 自动滚仓 Telegram 机器人
📋 项目简介
这是一个专为 Gate.io 永续合约设计的自动滚仓 Telegram 机器人，支持全仓模式做多策略，具备智能风控和实时监控功能。
✨ 核心特性

🔄 自动滚仓：固定 2% 间隔，智能计算加仓张数
📊 实时监控：持仓状态、盈亏情况、风险警报
🛡️ 智能风控：损失限制、强平价格计算、最大回撤监控
💬 友好交互：完整的 Telegram 机器人界面
🔒 安全可靠：API 签名验证、用户数据隔离
🌐 云端部署：支持 Railway 一键部署

🚀 快速开始
1. 环境准备
系统要求：

Python 3.11+
Railway 账户
Gate.io 账户（开通永续合约）
Telegram 账户

获取 API 密钥：

Telegram Bot Token

   1. 在 Telegram 搜索 @BotFather
   2. 发送 /newbot 创建机器人
   3. 设置机器人名称和用户名
   4. 获得 Bot Token

Gate.io API 密钥

   1. 登录 Gate.io 账户
   2. 进入 用户中心 -> API 管理
   3. 创建新的 API Key
   4. 开启期货交易权限
   5. 记录 API Key 和 Secret
2. Railway 部署
步骤 1：克隆项目
bashgit clone <your-repo-url>
cd gateio-rolling-bot
步骤 2：配置环境变量
创建 .env 文件：
envTELEGRAM_TOKEN=你的机器人Token
GATE_API_KEY=你的Gate.io_API_Key
GATE_API_SECRET=你的Gate.io_API_Secret
ADMIN_CHAT_ID=管理员Telegram用户ID（可选）
步骤 3：部署到 Railway

访问 railway.app
点击 "Start a New Project"
选择 "Deploy from GitHub repo"
连接你的 GitHub 仓库
在 Variables 中添加环境变量
等待部署完成

步骤 4：验证部署

在 Railway 控制台查看日志
在 Telegram 中搜索你的机器人
发送 /start 测试连接

📱 使用指南
基础命令
命令功能说明/start启动机器人显示欢迎信息和功能介绍/roll开始滚仓设置新的滚仓策略/status查看状态显示当前策略和持仓状态/help获取帮助显示详细使用说明
滚仓设置流程
步骤 1：启动设置
用户: /roll
机器人: 📝 请输入合约代码（例如：BTC_USDT）：
步骤 2：输入参数
用户: BTC_USDT
机器人: 📝 请输入杠杆倍数（1-100）：

用户: 10
机器人: 📝 请输入成本（USDT）：

用户: 1000
机器人: 📝 请输入滚仓次数：

用户: 5
机器人: 📝 请选择进场方式：
       [市价单] [限价单]
步骤 3：确认执行
机器人: 📋 请确认滚仓设置：
       合约：BTC_USDT
       杠杆：10x
       成本：1000 USDT
       滚仓次数：5
       进场方式：市价单
       
       ⚠️ 请确认信息无误后点击确认
       [✅ 确认] [❌ 取消]
步骤 4：自动执行
机器人: ✅ 滚仓策略启动成功！
       
       合约：BTC_USDT
       杠杆：10x
       成本：1000 USDT
       滚仓次数：5
       进场方式：市价单
策略逻辑详解
1. 初始进场

使用指定成本和杠杆进场
支持市价单（立即执行）或限价单（指定价格）

2. 滚仓计算
假设初始进场价格：50000 USDT
第1次滚仓价格：50000 × 1.02 = 51000 USDT
第2次滚仓价格：51000 × 1.02 = 52020 USDT
第3次滚仓价格：52020 × 1.02 = 53060.4 USDT
...以此类推
3. 张数计算
初始张数 = 成本 × 杠杆 ÷ 进场价格
滚仓张数 = 成本 × 杠杆 ÷ 第1次滚仓价格（固定）

例如：1000 USDT × 10倍 ÷ 51000 = 0.196 张
后续每次滚仓都使用 0.196 张
4. 自动挂单

策略启动后立即挂出所有滚仓订单
价格到达时自动执行加仓
使用盈利资金作为保证金

⚠️ 风险管理
重要风险提示

杠杆风险

高杠杆放大盈亏，可能导致快速爆仓
建议新手使用低杠杆（2-5倍）


滚仓风险

价格持续上涨才能盈利
价格下跌会放大损失
建议设置止损点


资金管理

不要投入全部资金
保留充足的备用保证金
分散投资，降低风险



内置风控功能
1. 实时监控

持仓盈亏监控
滚仓触发提醒
异常情况警报

2. 风险警报
🎉 盈利提醒：持仓盈利达到 20%+
⚠️ 风险警告：持仓亏损达到 -10%+
📈 滚仓提醒：即将触发下一次滚仓
3. 强平价格计算

自动计算强平价格
提供风险评估参考

🔧 高级配置
自定义参数
在 config.py 中可以调整以下参数：
python# 策略配置
DEFAULT_ROLLING_INTERVAL = 2.0  # 滚仓间隔百分比
MAX_ROLLING_COUNT = 10          # 最大滚仓次数
MIN_COST_USDT = 10              # 最小成本
MAX_LEVERAGE = 100              # 最大杠杆

# 风控配置
MAX_POSITION_VALUE = 100000     # 最大持仓价值
DAILY_LOSS_LIMIT = 1000         # 日损失限制
监控配置
python# 监控配置
ENABLE_MONITORING = True        # 启用监控
MONITOR_INTERVAL = 30           # 监控间隔秒

# 通知配置
ADMIN_CHAT_ID = "管理员ID"       # 管理员聊天ID
ENABLE_NOTIFICATIONS = True     # 启用通知
🐛 故障排除
常见问题
1. 机器人无响应

检查 Railway 部署状态
查看日志是否有错误信息
验证环境变量是否正确

2. API 调用失败
解决方案：
1. 确认 Gate.io API 密钥正确
2. 检查 API 权限（需要期货交易权限）
3. 验证账户余额是否充足
3. 订单失败
可能原因：
1. 保证金不足
2. 合约代码错误
3. 价格超出限制范围
4. 交易所维护中
日志查看
Railway 日志：

进入 Railway 项目控制台
点击 "Logs" 标签
查看实时日志输出

关键日志信息：
INFO - 启动 Gate.io 滚仓机器人...
INFO - 市价单进场成功: {...}
INFO - 滚仓订单 1 挂单成功，价格: 51000
ERROR - API 请求失败: {...}
📊 性能优化
建议配置
生产环境：

Railway Pro 计划（更稳定）
启用持久化存储
配置日志收集

开发环境：

使用测试网 API
小额资金测试
详细日志调试

监控建议

设置告警

配置管理员 Telegram ID
启用关键事件通知


定期检查

每日检查策略状态
定期查看日志
监控资金使用情况



📝 更新日志
v1.0.0 (当前版本)

✅ 基础滚仓功能
✅ Telegram 机器人界面
✅ Gate.io API 集成
✅ 风险监控系统
✅ Railway 部署支持

后续计划

🔄 止盈止损功能
📈 多策略支持
📊 数据统计分析
🔔 微信/邮件通知
💎 VIP 用户功能

🤝 技术支持
获取帮助

文档查阅

仔细阅读本使用手册
查看代码注释说明


社区支持

GitHub Issues
Telegram 群组


专业支持

付费技术咨询
定制开发服务



免责声明
⚠️ 风险提醒

本工具仅供学习和研究使用
数字货币交易存在极高风险
使用者应当充分了解风险并自行承担
开发者不承担任何投资损失责任

使用建议

请先在测试环境充分验证
建议小资金开始尝试
不要投入无法承受损失的资金
做好风险管理和资金控制

